(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{2116:function(t,e,a){Promise.resolve().then(a.bind(a,659))},8515:function(t,e,a){"use strict";a.d(e,{Z:function(){return p}});var s={};a.r(s),a.d(s,{getPostDetail:function(){return o},getPosts:function(){return c},postLike:function(){return i}});var n={};a.r(n),a.d(n,{postLogin:function(){return l},postSignUp:function(){return d}});var r=a(8472);let c=async t=>{try{return(await r.Z.get("".concat("https://kjiyu-devlog.com","/api/post/list/").concat(t,"/view"),{withCredentials:!0})).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error fetching posts: ".concat(t))}},o=async t=>{try{return(await r.Z.get("".concat("https://kjiyu-devlog.com","/api/post/").concat(t,"/detail"),{withCredentials:!0})).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error fetching post detail: ".concat(t))}},i=async(t,e)=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/post/").concat(t,"/like"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error posting like: ".concat(t))}},l=async t=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/auth"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw t.response.data}},d=async t=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/auth/signup"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw t.response.data}};var p={post:s,auth:n}},659:function(t,e,a){"use strict";a.r(e);var s=a(7437),n=a(2265),r=a(6463),c=a(1444),o=a(8515),i=a(6920),l=a(5079);e.default=()=>{let t=(0,r.useRouter)(),[e,a]=(0,n.useState)([]),[d,p]=(0,n.useState)([]),[h,u]=(0,n.useState)("all"),[m,g]=(0,n.useState)(!0),{modal:y,auth:v}=(0,c.v9)(t=>({modal:t.modals.modal,auth:t.auth}));console.log(v);let j=async t=>{u(t),g(!0);try{let e=await o.Z.post.getPosts(t);a(e.postsList)}catch(t){console.error("Error fetching data:",t)}finally{g(!1)}},f=async()=>{try{let t=await o.Z.post.getPosts("all");a(t.postsList),p([{categoryName:"전체",_id:"all"},...t.categoryFindResult])}catch(t){console.error("Error fetching data:",t)}finally{g(!1)}};return((0,n.useEffect)(()=>{f()},[]),m)?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{className:"wrapper",children:[(0,s.jsx)("div",{className:"ctgr-wrap",children:d.map(t=>(0,s.jsx)("p",{className:"pointer ".concat(h===t._id?"active":""),onClick:()=>j(t._id),children:t.categoryName},t._id))}),(0,s.jsx)("div",{className:"list-wrap",children:e.map(e=>{var a;return(0,s.jsxs)("div",{className:"list-container",children:[(0,s.jsx)("h4",{className:"title",children:e.title}),(0,s.jsxs)("div",{className:"info",children:[(0,s.jsx)("p",{className:"category",children:null===(a=d.find(t=>t._id===e.category))||void 0===a?void 0:a.categoryName}),(0,s.jsx)("p",{className:"date",children:e.date}),(0,s.jsxs)("p",{className:"likes_cmt",children:[(0,s.jsxs)("div",{className:"likes",children:[(0,s.jsx)(i.G,{icon:l.m6i}),e.likes.length]}),(0,s.jsxs)("div",{className:"cmt",children:[(0,s.jsx)(i.G,{icon:l.Mzg}),e.comments.length]})]})]}),(0,s.jsx)("div",{className:"content",children:e.previewContents}),(0,s.jsx)("button",{className:"read",onClick:()=>t.push("/post/?id=".concat(e._id)),children:"Read more"})]},e._id)})})]})}}},function(t){t.O(0,[676,194,472,971,23,744],function(){return t(t.s=2116)}),_N_E=t.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{2116:function(t,e,a){Promise.resolve().then(a.bind(a,659))},8515:function(t,e,a){"use strict";a.d(e,{Z:function(){return u}});var s={};a.r(s),a.d(s,{getPostComments:function(){return l},getPostDetail:function(){return c},getPosts:function(){return r},postComments:function(){return d},postLike:function(){return i}});var n={};a.r(n),a.d(n,{postLogin:function(){return p},postSignUp:function(){return h}});var o=a(8472);let r=async t=>{try{return(await o.Z.get("".concat("https://kjiyu-devlog.com","/api/post/list/").concat(t,"/view"),{withCredentials:!0})).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error fetching posts: ".concat(t))}},c=async t=>{try{return(await o.Z.get("".concat("https://kjiyu-devlog.com","/api/post/").concat(t,"/detail"),{withCredentials:!0})).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error fetching post detail: ".concat(t))}},i=async(t,e)=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/post/").concat(t,"/like"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error posting like: ".concat(t))}},l=async t=>{try{return(await o.Z.get("".concat("https://kjiyu-devlog.com","/api/post/").concat(t,"/comments"))).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error fetching post detail: ".concat(t))}},d=async(t,e)=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/post/").concat(t,"/comments"),e)).data}catch(e){let t=e.response?e.response.data.message:e.message;throw Error("Error fetching post detail: ".concat(t))}},p=async t=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/auth"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw t.response.data}},h=async t=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/auth/signup"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw t.response.data}};var u={post:s,auth:n}},659:function(t,e,a){"use strict";a.r(e);var s=a(7437),n=a(2265),o=a(6463),r=a(1444),c=a(8515),i=a(6920),l=a(5079);e.default=()=>{let t=(0,o.useRouter)(),[e,a]=(0,n.useState)([]),[d,p]=(0,n.useState)([]),[h,u]=(0,n.useState)("all"),[m,g]=(0,n.useState)(!0),{modal:y,auth:v}=(0,r.v9)(t=>({modal:t.modals.modal,auth:t.auth}));console.log(v);let f=async t=>{u(t),g(!0);try{let e=await c.Z.post.getPosts(t);a(e.postsList)}catch(t){console.error("Error fetching data:",t)}finally{g(!1)}},j=async()=>{try{let t=await c.Z.post.getPosts("all");a(t.postsList),p([{categoryName:"전체",_id:"all"},...t.categoryFindResult])}catch(t){console.error("Error fetching data:",t)}finally{g(!1)}};return((0,n.useEffect)(()=>{j()},[]),m)?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{className:"wrapper",children:[(0,s.jsx)("div",{className:"ctgr-wrap",children:d.map(t=>(0,s.jsx)("p",{className:"pointer ".concat(h===t._id?"active":""),onClick:()=>f(t._id),children:t.categoryName},t._id))}),(0,s.jsx)("div",{className:"list-wrap",children:e.map(e=>{var a;return(0,s.jsxs)("div",{className:"list-container",children:[(0,s.jsx)("h4",{className:"title",children:e.title}),(0,s.jsxs)("div",{className:"info",children:[(0,s.jsx)("p",{className:"category",children:null===(a=d.find(t=>t._id===e.category))||void 0===a?void 0:a.categoryName}),(0,s.jsx)("p",{className:"date",children:e.date}),(0,s.jsxs)("p",{className:"likes_cmt",children:[(0,s.jsxs)("div",{className:"likes",children:[(0,s.jsx)(i.G,{icon:l.m6i}),e.likes.length]}),(0,s.jsxs)("div",{className:"cmt",children:[(0,s.jsx)(i.G,{icon:l.Mzg}),e.comments.length]})]})]}),(0,s.jsx)("div",{className:"content",children:e.previewContents}),(0,s.jsx)("button",{className:"read",onClick:()=>t.push("/post/?id=".concat(e._id)),children:"Read more"})]},e._id)})})]})}}},function(t){t.O(0,[676,427,425,971,23,744],function(){return t(t.s=2116)}),_N_E=t.O()}]);
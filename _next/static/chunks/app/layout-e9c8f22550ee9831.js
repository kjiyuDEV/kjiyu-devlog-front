(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{255:function(e,t,a){Promise.resolve().then(a.t.bind(a,3500,23)),Promise.resolve().then(a.t.bind(a,1977,23)),Promise.resolve().then(a.bind(a,9824)),Promise.resolve().then(a.t.bind(a,3054,23)),Promise.resolve().then(a.t.bind(a,6859,23)),Promise.resolve().then(a.t.bind(a,2088,23)),Promise.resolve().then(a.t.bind(a,7458,23)),Promise.resolve().then(a.bind(a,2761))},8515:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var n={};a.r(n),a.d(n,{getPostComments:function(){return c},getPostDetail:function(){return i},getPosts:function(){return r},postComments:function(){return d},postLike:function(){return l}});var s={};a.r(s),a.d(s,{postLogin:function(){return u},postSignUp:function(){return p}});var o=a(8472);let r=async e=>{try{return(await o.Z.get("".concat("https://kjiyu-devlog.com","/api/post/list/").concat(e,"/view"),{withCredentials:!0})).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching posts: ".concat(e))}},i=async e=>{try{return(await o.Z.get("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/detail"),{withCredentials:!0})).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching post detail: ".concat(e))}},l=async(e,t)=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/like"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error posting like: ".concat(e))}},c=async e=>{try{return(await o.Z.get("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/comments"))).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching post detail: ".concat(e))}},d=async(e,t)=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/comments"),t)).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching post detail: ".concat(e))}},u=async e=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/auth"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw e.response.data}},p=async e=>{try{return(await o.Z.post("".concat("https://kjiyu-devlog.com","/api/auth/signup"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw e.response.data}};var m={post:n,auth:s}},9824:function(e,t,a){"use strict";a.d(t,{default:function(){return y}});var n=a(7437),s=a(2265),o=a(4398),r=a(6463),i=a(5079),l=a(6920),c=()=>{let e=(0,r.useRouter)();(0,r.usePathname)();let[t,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{a(o.tq)},[]),(0,n.jsxs)("div",{className:"header",children:[(0,n.jsxs)("div",{className:"left-wrap",children:[(0,n.jsx)(l.G,{icon:i.xiG,size:"2x",color:"white"}),(0,n.jsx)(l.G,{icon:i.wp6,size:"2x",color:"white",onClick:()=>e.push("/")})]}),(0,n.jsx)("div",{className:"right-wrap",children:(0,n.jsx)("input",{})})]})},d=a(3580),u=e=>{let{children:t}=e,a=(0,r.usePathname)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Ix,{theme:"dark",position:"bottom-center",hideProgressBar:!0,autoClose:3e3}),"/"!==a&&(0,n.jsx)(c,{}),t]})};function p(e){let{children:t}=e,o=(0,r.usePathname)(),i=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=i.current;a.e(873).then(a.bind(a,1873)).then(t=>{if(e){let a=new t.default({el:e,smooth:!0,multiplier:1.2,class:"is-reveal",mobile:{smooth:!0},tablet:{smooth:!0,breakpoint:0}});new ResizeObserver(()=>a.update()).observe(e);let n=()=>{var e;let t=(null===(e=window.history.state)||void 0===e?void 0:e.scrollPosition)||0;window.scrollTo(0,t),a.update()};return window.addEventListener("popstate",n),()=>{a.destroy(),window.removeEventListener("popstate",n)}}})},[o]);let l=()=>{let e=window.scrollY;window.history.replaceState({scrollPosition:e},"")};return(0,s.useEffect)(()=>(window.addEventListener("beforeunload",l),()=>{window.removeEventListener("beforeunload",l)}),[o]),console.log(o,"<pathname"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Ix,{position:"top-center",hideProgressBar:!0,autoClose:3e3}),"/"!==o&&(0,n.jsx)(c,{}),(0,n.jsxs)("div",{"data-scroll-container":!0,ref:i,children:[t,(0,n.jsx)("div",{className:"footer"})]})]})}a(4193);var m=a(1444),h=a(8515),g=a(3776),w=()=>{let e=(0,m.I0)();(0,r.useRouter)();let{modal:t,confirmModal:a,auth:o}=(0,m.v9)(e=>({modal:e.modals.modal,auth:e.auth,confirmModal:e.modals.confirmModal})),[i,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[p,w]=(0,s.useState)(""),v=()=>{h.Z.auth.postLogin({userId:i,password:c}).then(async t=>{w(""),e({type:g.w.CLOSE_MODAL}),e({type:g.w.LOGIN_SUCCESS,payload:t}),(0,d.Am)("".concat(t.user.name,"님, 안녕하세요!"))}).catch(e=>{"01"===e.code&&u(""),w(e.msg)})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"input-wrap",children:[(0,n.jsx)("input",{value:i,className:"login-input id",type:"text",placeholder:"ID",onChange:e=>{l(e.target.value),w("")},onKeyDown:e=>{"Enter"===e.key&&v()}}),(0,n.jsx)("input",{value:c,className:"login-input password",type:"password",placeholder:"Password",onChange:e=>{u(e.target.value),w("")},onKeyDown:e=>{"Enter"===e.key&&v()}})]}),""!==p&&(0,n.jsx)("h5",{className:"error login-msg",children:p}),(0,n.jsxs)("div",{className:"login-signup-wrap",children:[(0,n.jsx)("button",{className:"login-button",onClick:v,children:"Login"}),(0,n.jsxs)("div",{className:"signup-container",children:[(0,n.jsx)("h6",{children:"아직 회원이 아니신가요?"}),(0,n.jsx)("button",{className:"signup-button",onClick:()=>{e({type:g.w.OPEN_MODAL,data:{type:"signUp",title:"회원가입"}})},children:"SignUp"})]})]})]})},v=()=>{let e=(0,m.I0)(),[t,a]=(0,s.useState)({name:"",nickname:"",id:"",password1:"",password2:""}),[o,r]=(0,s.useState)(""),i=e=>{r(""),a({...t,[e.target.name]:e.target.value}),"password2"===e.target.name&&t.password1&&e.target.value!==t.password1&&r("비밀번호가 일치하지 않습니다.")},l=async()=>{if(t.password1!==t.password2)return r("비밀번호가 일치하지 않습니다.");let a={userId:t.id,name:t.name,password:t.password2,nickname:t.nickname};await h.Z.auth.postSignUp(a).then(t=>{e({type:g.w.CLOSE_MODAL,payload:t}),e({type:g.w.LOGIN_SUCCESS,payload:t}),d.Am.success("회원가입이 완료되었습니다.")}).catch(e=>{r(e.msg)})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"input-wrap signup",children:[(0,n.jsx)("input",{value:t.name,className:"login-input name",type:"text",placeholder:"이름 (Name, 특수문자 및 숫자 제외 가능)",name:"name",onChange:i}),(0,n.jsx)("input",{value:t.nickname,className:"login-input name",type:"text",placeholder:"별명 (Nickname, 공백시 이름과 동일)",name:"nickname",onChange:i}),(0,n.jsx)("input",{value:t.id,className:"login-input id",type:"text",placeholder:"아이디 (id)",name:"id",onChange:i}),(0,n.jsx)("input",{value:t.password1,className:"login-input password",type:"password",placeholder:"비밀번호 (password)",name:"password1",onChange:i}),(0,n.jsx)("input",{value:t.password2,className:"login-input password",type:"password",placeholder:"비밀번호 확인 (password check)",name:"password2",onChange:i})]}),""!==o&&(0,n.jsx)("h5",{className:"error login-msg",children:o}),(0,n.jsx)("button",{className:"login-button",onClick:l,children:"등록하기"})]})},j=e=>{let{children:t}=e,a=(0,m.I0)(),{modal:s}=(0,m.v9)(e=>(console.log(e,"<state"),{modal:e.modals.modal,auth:e.auth}));return s.open?(0,n.jsx)("div",{className:"modal-overlay",children:(0,n.jsxs)("div",{className:"modal-content",children:[s.data.title&&(0,n.jsx)("h2",{className:"modal-title",children:s.data.title}),(0,n.jsx)("button",{className:"modal-close",onClick:()=>{a({type:"CLOSE_MODAL"})},children:(0,n.jsx)(l.G,{icon:i.NBC})}),(0,n.jsxs)("div",{className:"modal-body",children:["login"===s.data.type&&(0,n.jsx)(w,{}),"signUp"===s.data.type&&(0,n.jsx)(v,{})]})]})}):null},f=()=>{let e=(0,m.I0)(),{modal:t,confirmModal:a}=(0,m.v9)(e=>({modal:e.modals.modal,auth:e.auth,confirmModal:e.modals.confirmModal})),s=()=>{e({type:t.open?g.w.CLOSE_MODAL:g.w.CLOSE_CONFIRM_MODAL})};return(0,n.jsx)("div",{className:"confirm-modal-overlay",children:(0,n.jsxs)("div",{className:"modal-content",children:[a.data.content&&(0,n.jsx)("h4",{className:"modal-contents",children:a.data.content}),(0,n.jsxs)("div",{className:"btn-wrap",children:[(0,n.jsx)("button",{className:"btn-cancel",onClick:s,children:"아니오"}),(0,n.jsx)("button",{className:"btn-confirm",onClick:()=>{e({type:g.w.LOGOUT_SUCCESS}),s(),(0,d.Am)("로그아웃 되었습니다")},children:"네"})]})]})})},y=e=>{let{children:t}=e,{confirmModal:a,modal:r,auth:i}=(0,m.v9)(e=>({confirmModal:e.modals.confirmModal,modal:e.modals.modal,auth:e.auth})),[l,c]=(0,s.useState)("");return(0,s.useEffect)(()=>{c(o.tq?"mobile":"desktop")},[]),(0,n.jsxs)("div",{children:[a.open&&(0,n.jsx)(f,{}),r.open&&(0,n.jsx)(j,{}),"mobile"===l&&(0,n.jsx)(u,{children:t}),"desktop"===l&&(0,n.jsx)(p,{children:t})]})}},3776:function(e,t,a){"use strict";a.d(t,{w:function(){return n}});let n={OPEN_MODAL:"OPEN_MODAL",CLOSE_MODAL:"CLOSE_MODAL",OPEN_CONFIRM_MODAL:"OPEN_CONFIRM_MODAL",CLOSE_CONFIRM_MODAL:"CLOSE_CONFIRM_MODAL",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGOUT_SUCCESS:"LOGOUT_SUCCESS"}},2761:function(e,t,a){"use strict";a.d(t,{default:function(){return w}});var n=a(7437),s=a(4504),o=a(1444),r=a(2351),i=a(5574),l=a(1046),c=a(3776);let d={token:null,isAuthenticated:null},u={modal:{open:!1,data:{type:"",title:"",description:""}},confirmModal:{open:!1,data:{type:"",content:"",description:"",txtCancel:"아니오",txtConfirm:"예",fncConfirm:null}},slideUp:{open:!1,data:{type:""}}},p={key:"root",storage:l.Z},m=(0,i.OJ)(p,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.w.LOGIN_SUCCESS:return localStorage.setItem("token",t.payload.token),Object.assign({},e,{...e,...t.payload,isAuthenticated:!0,isLoading:!0,userId:t.payload.user.id,role:t.payload.user.role,errorMsg:""});case c.w.LOGOUT_SUCCESS:return localStorage.removeItem("token"),Object.assign({},e,{token:null,user:null,userId:null,isAuthenticated:!1,isLoading:!1,role:null,errorMsg:""});default:return e}}),h=(0,r.xC)({reducer:{auth:m,modals:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return Object.assign({},e,{...e,modal:{open:!0,data:t.data}});case"CLOSE_MODAL":return Object.assign({},e,{...e,modal:{...u.modal}});case"OPEN_CONFIRM_MODAL":return Object.assign({},e,{...e,confirmModal:{open:!0,data:{...u.confirmModal.data,...t.data}}});case"CLOSE_CONFIRM_MODAL":return Object.assign({},e,{...e,confirmModal:{...u.confirmModal}});default:return e}}}}),g=(0,i.p5)(h);function w(e){let{children:t}=e;return(0,n.jsx)(o.zt,{store:h,children:(0,n.jsx)(s.r,{persistor:g,children:t})})}},3054:function(){},6859:function(){},7458:function(){},2088:function(){}},function(e){e.O(0,[228,676,427,425,580,793,971,23,744],function(){return e(e.s=255)}),_N_E=e.O()}]);
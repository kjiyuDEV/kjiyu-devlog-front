(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{255:function(e,t,s){Promise.resolve().then(s.t.bind(s,3500,23)),Promise.resolve().then(s.t.bind(s,1977,23)),Promise.resolve().then(s.bind(s,9824)),Promise.resolve().then(s.t.bind(s,3054,23)),Promise.resolve().then(s.t.bind(s,6859,23)),Promise.resolve().then(s.t.bind(s,2088,23)),Promise.resolve().then(s.t.bind(s,7458,23)),Promise.resolve().then(s.bind(s,1382))},1046:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var a={};s.r(a),s.d(a,{getPostComments:function(){return d},getPostDetail:function(){return l},getPosts:function(){return i},postComments:function(){return u},postLike:function(){return c}});var n={};s.r(n),s.d(n,{postLogin:function(){return p},postSignUp:function(){return m}});var o={};s.r(o),s.d(o,{fetchVisits:function(){return h}});var r=s(8472);let i=async e=>{try{return(await r.Z.get("".concat("https://kjiyu-devlog.com","/api/post/list/").concat(e,"/view"),{withCredentials:!0})).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching posts: ".concat(e))}},l=async e=>{try{return(await r.Z.get("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/detail"),{withCredentials:!0})).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching post detail: ".concat(e))}},c=async(e,t)=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/like"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error posting like: ".concat(e))}},d=async e=>{try{return(await r.Z.get("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/comments"))).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching post detail: ".concat(e))}},u=async(e,t)=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/post/").concat(e,"/comments"),t)).data}catch(t){let e=t.response?t.response.data.message:t.message;throw Error("Error fetching post detail: ".concat(e))}},p=async e=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/auth"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw e.response.data}},m=async e=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/auth/signup"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw e.response.data}},h=async e=>{try{return(await r.Z.post("".concat("https://kjiyu-devlog.com","/api/visitor/visit"),e)).data}catch(e){throw e.response.data}};var g={post:a,auth:n,visit:o}},9824:function(e,t,s){"use strict";s.d(t,{default:function(){return j}});var a=s(7437),n=s(2265),o=s(4398),r=s(6463),i=s(5079),l=s(6920),c=s(1444),d=s(3776),u=()=>{let e=(0,c.I0)(),t=(0,r.useRouter)(),s=(0,r.usePathname)(),{postList:n}=(0,c.v9)(e=>({postList:e.post}));return(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)("div",{className:"left-wrap",children:(0,a.jsx)(l.G,{icon:i.wp6,size:"2x",color:"white",onClick:()=>t.push("/")})}),"/list"===s&&(0,a.jsx)("div",{className:"right-wrap",children:(0,a.jsx)("input",{onChange:t=>{let s=t.target.value.toLowerCase().trim(),a=n.originPostList.filter(e=>e.title.toLowerCase().trim().includes(s));e({type:d.w.SET_POSTS,postList:a})}})})]})},p=s(3580),m=e=>{let{children:t}=e,s=(0,r.usePathname)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Ix,{theme:"dark",position:"bottom-center",hideProgressBar:!0,autoClose:3e3}),"/"!==s&&(0,a.jsx)(u,{}),t]})};function h(e){let{children:t}=e,o=(0,r.usePathname)(),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=i.current;s.e(873).then(s.bind(s,1873)).then(t=>{if(e){let s=new t.default({el:e,smooth:!0,multiplier:1.2,class:"is-reveal",mobile:{smooth:!0},tablet:{smooth:!0,breakpoint:0}});new ResizeObserver(()=>s.update()).observe(e);let a=()=>{var e;let t=(null===(e=window.history.state)||void 0===e?void 0:e.scrollPosition)||0;window.scrollTo(0,t),s.update()};return window.addEventListener("popstate",a),()=>{s.destroy(),window.removeEventListener("popstate",a)}}})},[o]);let l=()=>{let e=window.scrollY;window.history.replaceState({scrollPosition:e},"")};return(0,n.useEffect)(()=>(window.addEventListener("beforeunload",l),()=>{window.removeEventListener("beforeunload",l)}),[o]),console.log(o,"<pathname"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Ix,{position:"top-center",hideProgressBar:!0,autoClose:3e3}),"/"!==o&&(0,a.jsx)(u,{}),(0,a.jsxs)("div",{"data-scroll-container":!0,ref:i,children:[t,(0,a.jsx)("div",{className:"footer"})]})]})}s(4193);var g=s(1046),w=()=>{let e=(0,c.I0)();(0,r.useRouter)();let{modal:t,confirmModal:s,auth:o}=(0,c.v9)(e=>({modal:e.modals.modal,auth:e.auth,confirmModal:e.modals.confirmModal})),[i,l]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[h,w]=(0,n.useState)(""),v=()=>{g.Z.auth.postLogin({userId:i,password:u}).then(async t=>{w(""),e({type:d.w.CLOSE_MODAL}),e({type:d.w.LOGIN_SUCCESS,payload:t}),(0,p.Am)("".concat(t.user.name,"님, 안녕하세요!"))}).catch(e=>{"01"===e.code&&m(""),w(e.msg)})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"input-wrap",children:[(0,a.jsx)("input",{value:i,className:"login-input id",type:"text",placeholder:"ID",onChange:e=>{l(e.target.value),w("")},onKeyDown:e=>{"Enter"===e.key&&v()}}),(0,a.jsx)("input",{value:u,className:"login-input password",type:"password",placeholder:"Password",onChange:e=>{m(e.target.value),w("")},onKeyDown:e=>{"Enter"===e.key&&v()}})]}),""!==h&&(0,a.jsx)("h5",{className:"error login-msg",children:h}),(0,a.jsxs)("div",{className:"login-signup-wrap",children:[(0,a.jsx)("button",{className:"login-button",onClick:v,children:"Login"}),(0,a.jsxs)("div",{className:"signup-container",children:[(0,a.jsx)("h6",{children:"아직 회원이 아니신가요?"}),(0,a.jsx)("button",{className:"signup-button",onClick:()=>{e({type:d.w.OPEN_MODAL,data:{type:"signUp",title:"회원가입"}})},children:"SignUp"})]})]})]})},v=()=>{let e=(0,c.I0)(),[t,s]=(0,n.useState)({name:"",nickname:"",id:"",password1:"",password2:""}),[o,r]=(0,n.useState)(""),i=e=>{r(""),s({...t,[e.target.name]:e.target.value}),"password2"===e.target.name&&t.password1&&e.target.value!==t.password1&&r("비밀번호가 일치하지 않습니다.")},l=async()=>{if(t.password1!==t.password2)return r("비밀번호가 일치하지 않습니다.");let s={userId:t.id,name:t.name,password:t.password2,nickname:t.nickname};await g.Z.auth.postSignUp(s).then(t=>{e({type:d.w.CLOSE_MODAL,payload:t}),e({type:d.w.LOGIN_SUCCESS,payload:t}),p.Am.success("회원가입이 완료되었습니다.")}).catch(e=>{r(e.msg)})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"input-wrap signup",children:[(0,a.jsx)("input",{value:t.name,className:"login-input name",type:"text",placeholder:"이름 (Name, 특수문자 및 숫자 제외 가능)",name:"name",onChange:i}),(0,a.jsx)("input",{value:t.nickname,className:"login-input name",type:"text",placeholder:"별명 (Nickname, 공백시 이름과 동일)",name:"nickname",onChange:i}),(0,a.jsx)("input",{value:t.id,className:"login-input id",type:"text",placeholder:"아이디 (id)",name:"id",onChange:i}),(0,a.jsx)("input",{value:t.password1,className:"login-input password",type:"password",placeholder:"비밀번호 (password)",name:"password1",onChange:i}),(0,a.jsx)("input",{value:t.password2,className:"login-input password",type:"password",placeholder:"비밀번호 확인 (password check)",name:"password2",onChange:i})]}),""!==o&&(0,a.jsx)("h5",{className:"error login-msg",children:o}),(0,a.jsx)("button",{className:"login-button",onClick:l,children:"등록하기"})]})},y=e=>{let{children:t}=e,s=(0,c.I0)(),{modal:n}=(0,c.v9)(e=>(console.log(e,"<state"),{modal:e.modals.modal,auth:e.auth}));return n.open?(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"modal-content",children:[n.data.title&&(0,a.jsx)("h2",{className:"modal-title",children:n.data.title}),(0,a.jsx)("button",{className:"modal-close",onClick:()=>{s({type:"CLOSE_MODAL"})},children:(0,a.jsx)(l.G,{icon:i.NBC})}),(0,a.jsxs)("div",{className:"modal-body",children:["login"===n.data.type&&(0,a.jsx)(w,{}),"signUp"===n.data.type&&(0,a.jsx)(v,{})]})]})}):null},f=()=>{let e=(0,c.I0)(),{modal:t,confirmModal:s}=(0,c.v9)(e=>({modal:e.modals.modal,auth:e.auth,confirmModal:e.modals.confirmModal})),n=()=>{e({type:t.open?d.w.CLOSE_MODAL:d.w.CLOSE_CONFIRM_MODAL})};return(0,a.jsx)("div",{className:"confirm-modal-overlay",children:(0,a.jsxs)("div",{className:"modal-content",children:[s.data.content&&(0,a.jsx)("h4",{className:"modal-contents",children:s.data.content}),(0,a.jsxs)("div",{className:"btn-wrap",children:[(0,a.jsx)("button",{className:"btn-cancel",onClick:n,children:"아니오"}),(0,a.jsx)("button",{className:"btn-confirm",onClick:()=>{e({type:d.w.LOGOUT_SUCCESS}),n(),(0,p.Am)("로그아웃 되었습니다")},children:"네"})]})]})})},j=e=>{let{children:t}=e,{confirmModal:s,modal:r,auth:i}=(0,c.v9)(e=>({confirmModal:e.modals.confirmModal,modal:e.modals.modal,auth:e.auth})),[l,d]=(0,n.useState)("");return(0,n.useEffect)(()=>{d(o.tq?"mobile":"desktop")},[]),(0,a.jsxs)("div",{children:[s.open&&(0,a.jsx)(f,{}),r.open&&(0,a.jsx)(y,{}),"mobile"===l&&(0,a.jsx)(m,{children:t}),"desktop"===l&&(0,a.jsx)(h,{children:t})]})}},3776:function(e,t,s){"use strict";s.d(t,{w:function(){return a}});let a={OPEN_MODAL:"OPEN_MODAL",CLOSE_MODAL:"CLOSE_MODAL",OPEN_CONFIRM_MODAL:"OPEN_CONFIRM_MODAL",CLOSE_CONFIRM_MODAL:"CLOSE_CONFIRM_MODAL",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGOUT_SUCCESS:"LOGOUT_SUCCESS",SET_POSTS:"SET_POSTS"}},1382:function(e,t,s){"use strict";s.d(t,{default:function(){return v}});var a=s(7437),n=s(4504),o=s(1444),r=s(2351),i=s(5574),l=s(6632),c=s(3776);let d={token:null,isAuthenticated:null},u={modal:{open:!1,data:{type:"",title:"",description:""}},confirmModal:{open:!1,data:{type:"",content:"",description:"",txtCancel:"아니오",txtConfirm:"예",fncConfirm:null}},slideUp:{open:!1,data:{type:""}}},p={postList:[],originPostList:[]},m={key:"root",storage:l.Z},h=(0,i.OJ)(m,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.w.LOGIN_SUCCESS:return localStorage.setItem("token",t.payload.token),Object.assign({},e,{...e,...t.payload,isAuthenticated:!0,isLoading:!0,userId:t.payload.user.id,role:t.payload.user.role,errorMsg:""});case c.w.LOGOUT_SUCCESS:return localStorage.removeItem("token"),Object.assign({},e,{token:null,user:null,userId:null,isAuthenticated:!1,isLoading:!1,role:null,errorMsg:""});default:return e}}),g=(0,r.xC)({reducer:{auth:h,modals:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return Object.assign({},e,{...e,modal:{open:!0,data:t.data}});case"CLOSE_MODAL":return Object.assign({},e,{...e,modal:{...u.modal}});case"OPEN_CONFIRM_MODAL":return Object.assign({},e,{...e,confirmModal:{open:!0,data:{...u.confirmModal.data,...t.data}}});case"CLOSE_CONFIRM_MODAL":return Object.assign({},e,{...e,confirmModal:{...u.confirmModal}});default:return e}},post:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;return"SET_POSTS"===t.type?{...e,postList:t.postList,originPostList:t.originPostList||e.originPostList}:e}}}),w=(0,i.p5)(g);function v(e){let{children:t}=e;return(0,a.jsx)(o.zt,{store:g,children:(0,a.jsx)(n.r,{persistor:w,children:t})})}},3054:function(){},6859:function(){},7458:function(){},2088:function(){}},function(e){e.O(0,[228,676,58,920,580,793,971,23,744],function(){return e(e.s=255)}),_N_E=e.O()}]);